#!/usr/bin/env bash
externalOutputs=($(swaymsg -p -t get_outputs | grep Output | grep -v eDP-1 | cut -d ' ' -f 2))

case ${#externalOutputs[@]} in
	"0")
		WindowArranger <<-EOC
			eDP-1: T['title=.*']
		EOC
		;;
	"1") 
			WindowArranger -wait 30 <<-EOC
				eDP-1: V['title=Work' 'title=Log']
				${externalOutputs[0]}: H[T['instance=google-chrome'] T['instance="jetbrains-idea"'] V['instance=slack' 'title=".*Microsoft Teams.*"']]
			EOC
			swaymsg '[title=Slack] resize set width 1000 px'
			swaymsg '[instance=jetbrains-idea] resize set width 2400 px'
		;;
	"2")
			WindowArranger -wait 30 <<-EOC
				eDP-1: V['title=Work' 'title=Log']
				${externalOutputs[0]}: T['instance="jetbrains-idea"']
				${externalOutputs[1]}: H[T['instance="google-chrome"'] V['instance=slack' 'title=".*Microsoft Teams.*"']]
			EOC
			swaymsg '[instance=slack] resize set width 900px'
		;;
esac


